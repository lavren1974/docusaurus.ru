---
slug: /migration/automated
---

# Автоматическая миграция

CLI-миграция (миграция с помощью интерфейса командной строки) автоматически переносит ваш веб-сайт с версии 1 на версию 2.

:::info информация

После использования CLI-миграции по-прежнему требуются ручные действия, поскольку мы не можем автоматизировать миграцию полностью

:::

Миграция с помощью CLI:

- Конфигурации сайта (из `siteConfig.js` в `docusaurus.config.js`)
- `package.json`
- `sidebars.json`
- `/docs`
- `/blog`
- `/static`
- `/versioned_sidebar.json` и `/versioned_docs`, если на сайте используется управление версиями

Чтобы использовать миграцию с помощью CLI, выполните следующие действия:

1. Перед использованием CLI миграции убедитесь, что `/docs`, `/blog`, `/static`, `sidebars.json`, `siteConfig.js`, `package.json` соответствуют [структуре](#), показанной в начале этой страницы.

2. Для переноса веб-сайта версии 1, запустите CLI-миграцию с соответствующими путями файловой системы:

```bash
# формат команды миграции
npx @docusaurus/migrate migrate <v1 website directory> <desired v2 website directory>

# пример
npx @docusaurus/migrate migrate ./v1-website ./v2-website
```

3. Чтобы просмотреть свой новый веб-сайт локально, перейдите в каталог вашего веб-сайта версии 2 и запустите режим разработки.

```bash
cd ./v2-website
yarn install
yarn start
```

:::danger

CLI-миграция обновляет существующие файлы. Сначала обязательно зафиксируйте их!

:::

#### Параметры {#options}

Вы можете добавить флаги параметров в CLI миграции для автоматического переноса контента Markdown и страниц в v2. Вполне вероятно, что вам все равно придется внести некоторые ручные изменения для достижения желаемого результата.

| Название | Описание                                                             |
| -------- | -------------------------------------------------------------------- |
| `--mdx`  | Добавьте этот флаг для автоматического преобразования Markdown в MDX |
| `--page` | Добавьте этот флаг для автоматического переноса страниц              |

```bash
# пример использования параметров
npx @docusaurus/migrate migrate --mdx --page ./v1-website ./v2-website
```

:::danger

Миграция страниц и MDX всё ещё в процессе.

Мы рекомендуем вам попробовать запустить страницы без этих параметров, зафиксировать (коммит), а затем попытаться снова запустить миграцию с параметрами `--page` и `--mdx`.

Таким образом, вы сможете легко проверить и исправить diff.

:::
